# AIChat å¿«é€Ÿä½¿ç”¨æŒ‡å—

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. å•Ÿå‹• aichat

```bash
# æ–¹å¼ 1ï¼šä½¿ç”¨å®Œæ•´è·¯å¾‘
/Users/morrisliao/Desktop/git-repo/aichat/aichat/target/release/aichat

# æ–¹å¼ 2ï¼šå»ºç«‹åˆ¥åï¼ˆæ¨è–¦ï¼‰
alias ai='/Users/morrisliao/Desktop/git-repo/aichat/aichat/target/release/aichat'
ai
```

---

## ğŸ“‹ ä¸‰ç¨®ä½¿ç”¨æ¨¡å¼

### æ¨¡å¼ 1ï¼šCMD æ¨¡å¼ï¼ˆå–®æ¬¡å°è©±ï¼‰

```bash
# ç›´æ¥æå•
ai "ä»€éº¼æ˜¯éè¿´ï¼Ÿ"

# æŒ‡å®šæ¨¡å‹
ai -m gemini:gemini-2.0-flash-exp "å¯«ä¸€å€‹æ’åºæ¼”ç®—æ³•"

# è¼‰å…¥æª”æ¡ˆ
ai -f main.py "é€™æ®µç¨‹å¼ç¢¼æœ‰ä»€éº¼å•é¡Œï¼Ÿ"
```

### æ¨¡å¼ 2ï¼šREPL æ¨¡å¼ï¼ˆäº’å‹•å¼å°è©±ï¼‰

```bash
# å•Ÿå‹•äº’å‹•æ¨¡å¼
ai

# å¸¸ç”¨å‘½ä»¤
> .help              # é¡¯ç¤ºå¹«åŠ©
> .info              # é¡¯ç¤ºç³»çµ±è³‡è¨Šï¼ˆåŠŸèƒ½ 1ï¼‰
> .session my-work   # å»ºç«‹æœƒè©±
> .export output.md  # åŒ¯å‡ºæœƒè©±ï¼ˆåŠŸèƒ½ 2ï¼‰
> .backup list       # æŸ¥çœ‹å‚™ä»½ï¼ˆåŠŸèƒ½ 3ï¼‰
> .exit              # é€€å‡º
```

### æ¨¡å¼ 3ï¼šShell Assistantï¼ˆå‘½ä»¤ç”Ÿæˆï¼‰

```bash
# ç”Ÿæˆå‘½ä»¤ï¼ˆä¸åŸ·è¡Œï¼‰
ai -c "åˆ—å‡ºæ‰€æœ‰å¤§æ–¼ 100MB çš„æª”æ¡ˆ"

# ç”Ÿæˆä¸¦åŸ·è¡Œå‘½ä»¤ï¼ˆåŠŸèƒ½ 3ï¼šå®‰å…¨åŸ·è¡Œæ¨¡å¼ï¼‰
ai -e "åˆªé™¤èˆŠçš„æ—¥èªŒæª”æ¡ˆ"
```

---

## ğŸ†• æ–°åŠŸèƒ½ä½¿ç”¨æ–¹æ³•

### åŠŸèƒ½ 1ï¼šç’°å¢ƒè‡ªå‹•åµæ¸¬

```bash
# å•Ÿå‹• REPL
ai

# æŸ¥çœ‹ç³»çµ±ç’°å¢ƒè³‡è¨Š
> .info

# è¼¸å‡ºç¯„ä¾‹ï¼š
# Operating System: MacOS
# Shell: Zsh
# CPU Cores: 10
# Total Memory: 16 GB
# GPU: Apple Silicon
```

**ä½œç”¨ï¼š** AI æœƒè‡ªå‹•æ ¹æ“šä½ çš„ç³»çµ±ç’°å¢ƒç”Ÿæˆç›¸å®¹çš„å‘½ä»¤ã€‚

---

### åŠŸèƒ½ 2ï¼šSession åŒ¯å‡º

```bash
# å•Ÿå‹• REPL ä¸¦å»ºç«‹æœƒè©±
ai

> .session my-project
> å¯«ä¸€å€‹å¿«é€Ÿæ’åºæ¼”ç®—æ³•
> è§£é‡‹æ™‚é–“è¤‡é›œåº¦
> æä¾›æ¸¬è©¦ç¯„ä¾‹

# åŒ¯å‡ºå°è©±ç‚º Markdown æª”æ¡ˆ
> .export my-project.md

# æˆ–ä½¿ç”¨é è¨­æª”å
> .export
```

**åŒ¯å‡ºæª”æ¡ˆåŒ…å«ï¼š**
- å®Œæ•´çš„å°è©±è¨˜éŒ„
- Markdown æ ¼å¼åŒ–
- ç¨‹å¼ç¢¼å€å¡Šèªæ³•é«˜äº®
- æœƒè©±å…ƒè³‡æ–™

---

### åŠŸèƒ½ 3ï¼šå®‰å…¨åŸ·è¡Œæ¨¡å¼ â­

é€™æ˜¯æœ€é‡è¦çš„æ–°åŠŸèƒ½ï¼æä¾›å®‰å…¨çš„å‘½ä»¤åŸ·è¡Œç’°å¢ƒã€‚

#### 3.1 Execute æ¨¡å¼ï¼ˆå‘½ä»¤ç”Ÿæˆèˆ‡åŸ·è¡Œï¼‰

```bash
# ç”Ÿæˆä¸¦æº–å‚™åŸ·è¡Œå‘½ä»¤
ai -e "åˆªé™¤æ‰€æœ‰ .log æª”æ¡ˆ"

# AI ç”Ÿæˆå‘½ä»¤å¾Œï¼Œæœƒé¡¯ç¤ºäº’å‹•é¸é …ï¼š
# rm *.log
# [p]review | [e]xecute | [r]evise | [t]utor | [c]opy | [q]uit: _
```

**äº’å‹•é¸é …èªªæ˜ï¼š**

| é¸é … | åŠŸèƒ½ | èªªæ˜ |
|------|------|------|
| **p** | Preview | é è¦½å‘½ä»¤æœƒå½±éŸ¿å“ªäº›æª”æ¡ˆ |
| **e** | Execute | åŸ·è¡Œå‘½ä»¤ï¼ˆè‡ªå‹•å»ºç«‹å‚™ä»½ï¼‰ |
| **r** | Revise | ä¿®æ”¹å‘½ä»¤ |
| **t** | Tutor | å­¸ç¿’å‘½ä»¤çš„ä½œç”¨å’Œç”¨æ³• |
| **c** | Copy | è¤‡è£½å‘½ä»¤åˆ°å‰ªè²¼ç°¿ |
| **q** | Quit | å–æ¶ˆåŸ·è¡Œ |

#### 3.2 Preview æ¨¡å¼ï¼ˆ'p' é¸é …ï¼‰

```bash
ai -e "åˆªé™¤æ‰€æœ‰ txt æª”æ¡ˆ"
# ç”Ÿæˆå‘½ä»¤ï¼šrm *.txt
# é¸æ“‡ï¼šp

# è¼¸å‡ºç¯„ä¾‹ï¼š
# ğŸ“Š Command Analysis
# Command: rm *.txt
# Operation: Delete
# Safety Level: Dangerous
#
# Affected Files:
#   1 [âœ“] /tmp/test1.txt
#   2 [âœ“] /tmp/test2.txt
#   3 [âœ“] /tmp/important.txt
#
# âš ï¸  DANGEROUS: This operation cannot be easily undone!
# âœ“ Backup will be created automatically before execution.
```

#### 3.3 Tutor æ¨¡å¼ï¼ˆ't' é¸é …ï¼‰

```bash
ai -e "æ¬ç§» file.txt åˆ° backup ç›®éŒ„"
# ç”Ÿæˆå‘½ä»¤ï¼šmv file.txt backup/
# é¸æ“‡ï¼št

# è¼¸å‡ºç¯„ä¾‹ï¼š
# ğŸ“š Command Tutorial
# Command: mv file.txt backup/
#
# Structure Breakdown:
#   â–¶ï¸ mv              - Move/rename files or directories
#   ğŸš© file.txt        - Source file
#   ğŸš© backup/         - Destination directory
#
# Environment Context:
#   Current OS: MacOS
#   Current Shell: Zsh
#
# Safety Notes:
#   ğŸ’¡ This command will overwrite files with the same name
#   ğŸ’¡ Use -i flag for interactive prompts before overwriting
```

#### 3.4 Execute æ¨¡å¼ï¼ˆ'e' é¸é …ï¼‰

```bash
ai -e "åˆªé™¤ old_file.txt"
# ç”Ÿæˆå‘½ä»¤ï¼šrm old_file.txt
# é¸æ“‡ï¼še

# è¼¸å‡ºï¼š
# âœ“ Backup created: a1b2c3d4-e5f6-7890-abcd-ef1234567890
# [åŸ·è¡Œå‘½ä»¤]
# âœ“ Command executed successfully

# å¦‚æœå‘½ä»¤å¤±æ•—ï¼š
# âš  Command failed! To restore backup, run: .backup restore a1b2c3d4-...
```

#### 3.5 å‚™ä»½ç®¡ç†ï¼ˆ.backup å‘½ä»¤ï¼‰

```bash
# å•Ÿå‹• REPL
ai

# åˆ—å‡ºæ‰€æœ‰å‚™ä»½
> .backup list

# è¼¸å‡ºç¯„ä¾‹ï¼š
# ğŸ“¦ Backup History
# ================================================================================
#
# [1] ID: a1b2c3d4-e5f6-7890-abcd-ef1234567890
#     Time: 2025-12-05T14:30:00+08:00
#     Command: rm *.log
#     Files: 3 backed up
#       - /var/log/app.log
#       - /var/log/error.log
#       - /var/log/debug.log
#
# [2] ID: b2c3d4e5-f6a7-8901-bcde-f12345678901
#     Time: 2025-12-05T13:15:00+08:00
#     Command: mv old_file.txt archive/
#     Files: 1 backed up
#       - old_file.txt
# ================================================================================

# å¾©åŸå‚™ä»½
> .backup restore a1b2c3d4-e5f6-7890-abcd-ef1234567890
# âœ“ Restored: /var/log/app.log
# âœ“ Restored: /var/log/error.log
# âœ“ Restored: /var/log/debug.log

# åˆªé™¤å‚™ä»½
> .backup delete b2c3d4e5-f6a7-8901-bcde-f12345678901
# âœ“ Backup deleted

# æ¸…ç†èˆŠå‚™ä»½ï¼ˆåªä¿ç•™æœ€è¿‘ 50 å€‹ï¼‰
> .backup cleanup 50
# âœ“ Cleaned up 15 old backups
```

---

## ğŸ“ å¯¦ç”¨ç¯„ä¾‹

### ç¯„ä¾‹ 1ï¼šå®‰å…¨åˆªé™¤æª”æ¡ˆ

```bash
# å»ºç«‹æ¸¬è©¦æª”æ¡ˆ
mkdir -p /tmp/test-delete
cd /tmp/test-delete
echo "data 1" > file1.txt
echo "data 2" > file2.txt

# ä½¿ç”¨ Preview æŸ¥çœ‹å½±éŸ¿
ai -e "delete all txt files"
# é¸æ“‡ 'p' æŸ¥çœ‹æœƒåˆªé™¤å“ªäº›æª”æ¡ˆ

# ç¢ºèªå¾ŒåŸ·è¡Œï¼ˆæœƒè‡ªå‹•å‚™ä»½ï¼‰
# é¸æ“‡ 'e' åŸ·è¡Œ

# å¦‚æœæƒ³å¾©åŸ
ai
> .backup list
> .backup restore <é¡¯ç¤ºçš„å‚™ä»½ID>
```

### ç¯„ä¾‹ 2ï¼šå­¸ç¿’æ–°å‘½ä»¤

```bash
ai -e "find large files bigger than 100MB"
# AI ç”Ÿæˆå‘½ä»¤

# é¸æ“‡ 't' å­¸ç¿’é€™å€‹å‘½ä»¤çš„ç”¨æ³•
# ç³»çµ±æœƒè©³ç´°è§£é‡‹æ¯å€‹åƒæ•¸çš„ä½œç”¨
```

### ç¯„ä¾‹ 3ï¼šSession è¨˜éŒ„èˆ‡åŒ¯å‡º

```bash
ai
> .session learning-rust
> ä»€éº¼æ˜¯ Rust çš„æ‰€æœ‰æ¬Šæ©Ÿåˆ¶ï¼Ÿ
> çµ¦æˆ‘ä¸€å€‹ç¯„ä¾‹
> é€™å’Œ C++ çš„ RAII æœ‰ä»€éº¼ä¸åŒï¼Ÿ
> ...æ›´å¤šè¨è«–...

# åŒ¯å‡ºå°è©±è¨˜éŒ„
> .export rust-learning.md

# ä¹‹å¾Œå¯ä»¥æäº¤é€™å€‹ Markdown æª”æ¡ˆä½œç‚ºå­¸ç¿’ç­†è¨˜
```

---

## âš™ï¸ é…ç½®æª”æ¡ˆ

**ä½ç½®ï¼š** `~/Library/Application Support/aichat/config.yaml`

**ç¯„ä¾‹é…ç½®ï¼š**
```yaml
clients:
  - type: gemini
    api_key: YOUR_GEMINI_API_KEY_HERE

model: gemini:gemini-2.0-flash-exp
```

**å…¶ä»–å¯ç”¨é¸é …ï¼š**
```yaml
# å„²å­˜æœƒè©±
save_session: true

# æœƒè©±å£“ç¸®é–¾å€¼ï¼ˆtokensï¼‰
compress_threshold: 4000

# å•Ÿç”¨ Shell æ­·å²è¨˜éŒ„
save_shell_history: true

# ä¸²æµè¼¸å‡º
stream: true
```

---

## ğŸ” å¸¸è¦‹å•é¡Œ

### Q1: å¦‚ä½•åˆ‡æ› AI æ¨¡å‹ï¼Ÿ

```bash
# æ–¹å¼ 1ï¼šå‘½ä»¤åˆ—åƒæ•¸
ai -m gpt-4o "å•é¡Œ"

# æ–¹å¼ 2ï¼šREPL ä¸­åˆ‡æ›
ai
> .model gpt-4o
```

### Q2: å‚™ä»½æª”æ¡ˆå­˜åœ¨å“ªè£¡ï¼Ÿ

**å‚™ä»½ä½ç½®ï¼š** `~/.aichat_backups/`

**çµæ§‹ï¼š**
```
~/.aichat_backups/
â”œâ”€â”€ backup_index.json          # å‚™ä»½ç´¢å¼•
â”œâ”€â”€ a1b2c3d4-e5f6-7890-.../    # å‚™ä»½ 1
â”‚   â”œâ”€â”€ file1.txt
â”‚   â””â”€â”€ file2.txt
â””â”€â”€ b2c3d4e5-f6a7-8901-.../    # å‚™ä»½ 2
    â””â”€â”€ old_file.txt
```

### Q3: å¦‚ä½•æª¢è¦–å·²åŒ¯å‡ºçš„ Sessionï¼Ÿ

```bash
# ä½¿ç”¨ä»»ä½• Markdown é–±è®€å™¨
open session-name.md
# æˆ–
cat session-name.md
```

### Q4: Preview æ¨¡å¼èƒ½æª¢æ¸¬æ‰€æœ‰å±éšªæ“ä½œå—ï¼Ÿ

**èƒ½æª¢æ¸¬çš„æ“ä½œï¼š**
- âœ… æª”æ¡ˆåˆªé™¤ï¼ˆrm, delï¼‰
- âœ… æª”æ¡ˆç§»å‹•ï¼ˆmv, moveï¼‰
- âœ… æª”æ¡ˆä¿®æ”¹ï¼ˆsed, awk, >ï¼‰
- âœ… ç³»çµ±å‘½ä»¤ï¼ˆsudo, chmod, chownï¼‰

**é™åˆ¶ï¼š**
- è¤‡é›œçš„ç®¡é“å‘½ä»¤å¯èƒ½ç„¡æ³•å®Œå…¨åˆ†æ
- è…³æœ¬å…§çš„æ“ä½œç„¡æ³•æª¢æ¸¬

---

## ğŸ¯ æ¸¬è©¦å»ºè­°

### å®‰å…¨æ¸¬è©¦æµç¨‹

1. **å»ºç«‹æ¸¬è©¦ç’°å¢ƒ**
   ```bash
   mkdir -p /tmp/aichat-safe-test
   cd /tmp/aichat-safe-test
   echo "test" > test1.txt
   echo "test" > test2.txt
   ```

2. **æ¸¬è©¦ Preview**
   ```bash
   ai -e "delete all txt files"
   # é¸æ“‡ 'p' æŸ¥çœ‹åˆ†æçµæœ
   # é¸æ“‡ 'q' å–æ¶ˆï¼ˆä¸åŸ·è¡Œï¼‰
   ```

3. **æ¸¬è©¦ Tutor**
   ```bash
   ai -e "copy all txt files to backup/"
   # é¸æ“‡ 't' å­¸ç¿’å‘½ä»¤
   ```

4. **æ¸¬è©¦ Execute + å‚™ä»½**
   ```bash
   ai -e "remove test2.txt"
   # é¸æ“‡ 'e' åŸ·è¡Œ
   # è¨˜ä¸‹å‚™ä»½ ID
   ```

5. **æ¸¬è©¦å¾©åŸ**
   ```bash
   ai
   > .backup list
   > .backup restore <å‚™ä»½ID>
   # é©—è­‰ test2.txt å·²å¾©åŸ
   ```

---

## ğŸ“š é€²éšæŠ€å·§

### 1. çµ„åˆä½¿ç”¨å¤šå€‹åŠŸèƒ½

```bash
# é–‹å•Ÿæœƒè©± + å®‰å…¨åŸ·è¡Œ + åŒ¯å‡ºè¨˜éŒ„
ai
> .session cleanup-logs
> # è¨è«–å¦‚ä½•æ¸…ç†æ—¥èªŒ
> .exit

# åŸ·è¡Œæ¸…ç†ï¼ˆæœƒè‡ªå‹•åµæ¸¬ç’°å¢ƒï¼‰
ai -e "remove old log files from /var/log"
# ä½¿ç”¨ Preview å’Œ Execute

# å›åˆ°æœƒè©±è¨˜éŒ„
ai
> .session cleanup-logs
> æ¸…ç†å®Œæˆï¼Œä½¿ç”¨äº†å‚™ä»½åŠŸèƒ½
> .export cleanup-report.md
```

### 2. å»ºç«‹å¸¸ç”¨åˆ¥å

```bash
# åŠ å…¥ ~/.zshrc æˆ– ~/.bashrc
alias ai='/Users/morrisliao/Desktop/git-repo/aichat/aichat/target/release/aichat'
alias aic='ai -c'     # åªç”Ÿæˆå‘½ä»¤
alias aie='ai -e'     # ç”Ÿæˆä¸¦åŸ·è¡Œ
alias air='ai'        # REPL æ¨¡å¼
```

---

## âœ… ç¸½çµ

**AIChat ä¸‰å¤§æ–°åŠŸèƒ½ï¼š**

1. **ç’°å¢ƒè‡ªå‹•åµæ¸¬** - AI è‡ªå‹•é©æ‡‰ä½ çš„ç³»çµ±ç’°å¢ƒ
2. **Session åŒ¯å‡º** - å°è©±è¨˜éŒ„è½‰ç‚º Markdown æ–‡ä»¶
3. **å®‰å…¨åŸ·è¡Œæ¨¡å¼** - Previewã€Tutorã€è‡ªå‹•å‚™ä»½ã€ä¸€éµå¾©åŸ

**æœ€ä½³å¯¦è¸ï¼š**
- ä½¿ç”¨ Preview æŸ¥çœ‹å‘½ä»¤å½±éŸ¿
- ä½¿ç”¨ Tutor å­¸ç¿’æ–°å‘½ä»¤
- ä¾è³´è‡ªå‹•å‚™ä»½ä¿è­·é‡è¦æª”æ¡ˆ
- å®šæœŸä½¿ç”¨ `.backup cleanup` æ¸…ç†èˆŠå‚™ä»½
- åŒ¯å‡ºé‡è¦å°è©±è¨˜éŒ„

**ç«‹å³é–‹å§‹ä½¿ç”¨ï¼š**
```bash
ai
> .info              # æŸ¥çœ‹ç’°å¢ƒ
> .help              # æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤
```

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
